name: DATA-HelloWorld-v1
type: feature
description: Proxy for DATA-HelloWorld-v1
parameters:
  - name: MESSAGE
    displayName: MESSAGE
    description: Configuration input for MESSAGE
    default: Hello world!
    examples: []
endpointFlows:
  - name: PostFlow
    mode: Response
    steps:
      - name: JS-AddHelloWorld
targetFlows: []
endpoints: []
targets: []
policies:
  - name: JS-AddHelloWorld
    type: Javascript
    content:
      Javascript:
        _attributes:
          continueOnError: "false"
          enabled: "true"
          timeLimit: "200"
          name: JS-AddHelloWorld
        DisplayName:
          _text: JS-AddHelloWorld
        Properties: {}
        ResourceURL:
          _text: jsc://hello-world.js
resources:
  - name: hello-world.js
    type: jsc
    content: |-
      var responseObject = response.content.asJSON;

      if (responseObject) {
        var message = context.getVariable("request.queryparam.message");
        if (!message)
          message = context.getVariable("propertyset.helloworld.MESSAGE");
        if (!message)
          message = "Hello world!";
        responseObject["message"] = message;
        context.setVariable("response.content", JSON.stringify(responseObject))
      }
  - name: helloworld.properties
    type: properties
    content: |
      MESSAGE={MESSAGE}
