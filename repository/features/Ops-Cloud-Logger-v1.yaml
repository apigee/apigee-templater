name: Cloud-Logger-v1
type: feature
description: ""
parameters: []
endpointFlows:
  - name: PreFlow
    mode: Response
    steps:
      - name: ML-CloudLogging
targetFlows: []
endpoints: []
targets: []
policies:
  - name: ML-CloudLogging
    type: MessageLogging
    content:
      MessageLogging:
        _attributes:
          continueOnError: "false"
          enabled: "true"
          name: ML-CloudLogging
        DisplayName:
          _text: ML-CloudLogging
        CloudLogging:
          LogName:
            _text: projects/{organization.name}/logs/api-gateway-logs
          Message:
            _attributes:
              contentType: application/json
            _text: |-
              {
                          "timestamp": "{system.timestamp}",
                          "api_proxy": "{apiproxy.name}",
                          "org_name": "{organization.name}",
                          "env_name": "{environment.name}",
                          "request_id": "{messageid}",
                          "client_ip": "{client.ip}",
                          "verb": "{request.verb}",
                          "request_path": "{proxy.basepath}{proxy.pathsuffix}",
                          "status_code": "{response.status.code}",
                          "user_agent": "{request.header.User-Agent}",
                          "error_flow": "{flow.error.state}"
                      }
resources: []
