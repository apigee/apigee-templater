name: cors
displayName: CORS
type: feature
description: |
  This feature adds CORS handling to a proxy, with parameters for the allowed origins, methods and headers,
  and allowing developer portal web applications to also access API endpoints for 'Try It Out' features.

  **Prerequisites**
  None.

  **Inputs**
  None.

  **Outputs**
  - The allowed headers are set according to the configuration, enabling CORS requests to be answered for allowed requests.
priority: 5
categories:
  - traffic
parameters:
  - name: ALLOWED_ORIGINS
    description: The allowed origins of clients.
    paths:
      - $.policies[:1].content.CORS.AllowOrigins._text
    default: "*"
    examples:
      - "*"
      - "{request.header.origin}"
  - name: ALLOWED_HEADERS
    description: The allowed headers for clients to send.
    paths:
      - $.policies[:1].content.CORS.AllowHeaders._text
    default: origin, x-requested-with, accept, content-type
    examples:
      - origin, x-requested-with, accept, content-type
defaultEndpoint:
  name: default
  basePath: /feature-http-cors-v1
  routes:
    - name: default
  flows:
    - name: PreFlow
      mode: Request
      steps:
        - name: CORS-AddCors
  faultRules: []
endpoints: []
targets: []
policies:
  - name: CORS-AddCors
    type: CORS
    content:
      CORS:
        _attributes:
          continueOnError: "false"
          enabled: "true"
          name: CORS-AddCors
        DisplayName:
          _text: CORS-AddCors
        AllowOrigins:
          _text: "*"
        AllowMethods:
          _text: GET, PUT, POST, DELETE
        AllowHeaders:
          _text: origin, x-requested-with, accept, content-type
        ExposeHeaders:
          _text: "*"
        MaxAge:
          _text: "3628800"
        AllowCredentials:
          _text: "false"
        GeneratePreflightResponse:
          _text: "true"
        IgnoreUnresolvedVariables:
          _text: "true"
resources: []
tests: []
