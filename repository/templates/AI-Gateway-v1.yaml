name: AI-Gateway-v1
type: template
description: API template for AI-Gateway-v1
features:
  - name: ../features/proxy-gemini.yaml
    id: jxchz
  - name: ../features/proxy-mistral.yaml
    id: 8n47w
  - name: ../features/llm-prompt-extract.yaml
    id: 2hg6s
  - name: ../features/llm-prompt-pii-mask.yaml
    id: 7d0aj
  - name: ../features/llm-prompt-sanitize.yaml
    id: jwdo0g
parameters:
  - name: proxy-gemini.BASE_PATH
    displayName: BASE_PATH
    description: The base path on the proxy to receive traffic.
    default: /v1/gemini
    examples:
      - /v1/gemini
      - /gemini
      - /llm/gemini
  - name: proxy-gemini.PROJECT_ID
    displayName: PROJECT_ID
    description: The GCP project id that should be used for the Vertex AI Gemini endpoint.
    default: YOUR_PROJECT_ID
    examples:
      - YOUR_PROJECT_ID
  - name: proxy-gemini.REGION
    displayName: REGION
    description: The GCP region that should be used for the Vertex AI Gemini endpoint.
    default: europe-west1
    examples:
      - europe-west1
      - us-east1
  - name: proxy-gemini.MODEL_ID
    displayName: MODEL_ID
    description: The Gemini model to use for the request.
    default: gemini-2.5-flash
    examples:
      - gemini-2.5-flash
      - gemini-2.5-pro
  - name: proxy-gemini.GEMINI_PATH
    displayName: GEMINI_PATH
    description: Configuration input for GEMINI_PATH
    default: "{REGION}-aiplatform.googleapis.com/v1beta1/projects/{PROJECT_ID}/loca\
      tions/{REGION}/endpoints/openapi/chat/completions"
    examples: []
  - name: proxy-mistral.BASE_PATH
    displayName: BASE_PATH
    description: The base path on the proxy to receive traffic.
    default: /v1/mistral
    examples:
      - /v1/mistral
      - /mistral
      - /llm/mistral
  - name: proxy-mistral.PROJECT_ID
    displayName: PROJECT_ID
    description: The GCP project id that should be used for the Vertex AI Gemini endpoint.
    default: YOUR_PROJECT_ID
    examples:
      - YOUR_PROJECT_ID
  - name: proxy-mistral.REGION
    displayName: REGION
    description: The GCP region that should be used for the Vertex AI endpoint.
    default: europe-west4
    examples:
      - europe-west4
      - us-central1
  - name: proxy-mistral.MODEL_ID
    description: Configuration input for MODEL_ID
    default: mistral-medium-3
    examples:
      - mistral-medium-3
      - mistral-small-2503
  - name: proxy-mistral.MISTRAL_PATH
    displayName: MISTRAL_PATH
    description: Configuration input for MISTRAL_PATH
    default: europe-west4-aiplatform.googleapis.com/v1/projects/apigee-prod13/locations/europe-west4/publishers/mistralai/models/mistral-medium-3:rawPredict
    examples: []
  - name: llm-prompt-pii-mask.PROJECT_ID
    displayName: DLP Project Id
    description: Configuration input for PROJECT_ID
    default: apigee-prod13
    examples: []
  - name: llm-prompt-sanitize.PROJECT_ID
    displayName: Model Armor GCP Project Id
    description: Configuration input for PROJECT_ID
    default: "{organization.name}"
    examples:
      - "{organization.name}"
  - name: llm-prompt-sanitize.REGION
    displayName: Model Armor GCP region
    description: Configuration input for REGION
    default: "{system.region.name}"
    examples:
      - "{system.region.name}"
  - name: llm-prompt-sanitize.TEMPLATE_ID
    displayName: Model Armor Template Id
    description: Configuration input for TEMPLATE_ID
    default: projects/{organization.name}/locations/{system.region.name}/templates/default-ma-template
    examples: []
endpoints:
  - name: default
    basePath: /ai-gateway-v1
    routes:
      - name: default
  - name: jxchz-gemini
    basePath: /v1/gemini
    routes:
      - name: default
        target: jxchz-gemini
  - name: 8n47w-mistral
    basePath: /v1/mistral
    routes:
      - name: default
        target: 8n47w-mistral
targets:
  - name: jxchz-gemini
    url: https://{propertyset.gemini.GEMINI_PATH}
    auth: GoogleAccessToken
    scopes:
      - https://www.googleapis.com/auth/cloud-platform
  - name: 8n47w-mistral
    url: https://{propertyset.mistral.MISTRAL_PATH}
    auth: GoogleAccessToken
    scopes:
      - https://www.googleapis.com/auth/cloud-platform
