name: AI-Gateway-v1
type: template
description: API template for AI-Gateway-v1
features:
  - ../features/MODEL-Gemini-v1.yaml
  - ../features/MODEL-Mistral-v1.yaml
parameters:
  - name: MODEL-Gemini-v1.PROJECT_ID
    displayName: PROJECT_ID
    description: The GCP project id that should be used for the Vertex AI Gemini endpoint.
    default: "{organization.name}"
    examples:
      - "{organization.name}"
  - name: MODEL-Gemini-v1.REGION
    displayName: REGION
    description: The GCP region that should be used for the Vertex AI Gemini endpoint.
    default: "{system.region.name}"
    examples:
      - "{system.region.name}"
  - name: MODEL-Gemini-v1.MODEL_ID
    displayName: MODEL_ID
    description: The Gemini model to use for the request.
    default: gemini-2.5-flash
    examples:
      - gemini-2.5-flash
      - gemini-2.5-pro
  - name: Feature-MODEL-Mistral-v1.PROJECT_ID
    displayName: PROJECT_ID
    description: The GCP project id that should be used for the Vertex AI Gemini endpoint.
    default: "{organization.name}"
    examples:
      - "{organization.name}"
  - name: Feature-MODEL-Mistral-v1.REGION
    displayName: REGION
    description: The GCP region that should be used for the Vertex AI Gemini endpoint.
    default: us-central1
    examples:
      - us-central1
  - name: Feature-MODEL-Mistral-v1.MODEL_ID
    description: Configuration input for MODEL_ID
    default: mistral-large-2411
    examples:
      - mistral-large-2411
endpoints:
  - name: gemini
    basePath: /v1/gemini
    routes:
      - name: default
        target: gemini
  - name: mistral
    basePath: /v1/mistral
    routes:
      - name: default
        target: mistral
targets:
  - name: gemini
    url: https://{REGION}-aiplatform.googleapis.com/v1/projects/{PROJECT_ID}/locations/{REGION}/publishers/google/models/{MODEL_ID}:generateContent
    auth: GoogleAccessToken
    scopes:
      - https://www.googleapis.com/auth/cloud-platform
  - name: mistral
    url: https://{REGION}-aiplatform.googleapis.com/v1/projects/{PROJECT_ID}/locations/{REGION}/publishers/mistralai/models/{MODEL_ID}:rawPredict
    auth: GoogleAccessToken
    scopes:
      - https://www.googleapis.com/auth/cloud-platform
