name: AI-Gateway-v1
type: template
description: API template for AI-Gateway-v1
features:
  - ../features/MODEL-Gemini-v1.yaml
  - ../features/LLM-SanitizeRequest-v1.yaml
parameters:
  - name: AUTH-Key-Header-v1.API_KEY_HEADER_NAME
    description: The header where the api key is checked.
    default: x-api-key
    examples:
      - x-api-key
      - x-apikey
  - name: Feature-LLM-MaskRequest-v1.PROJECT_ID
    displayName: DLP Project Id
    description: Configuration input for PROJECT_ID
    default: "{organization.name}"
    examples:
      - "{organization.name}"
  - name: MODEL-Gemini-v1.PROJECT_ID
    displayName: PROJECT_ID
    description: The GCP project id that should be used for the Vertex AI Gemini endpoint.
    default: "{organization.name}"
    examples:
      - "{organization.name}"
  - name: MODEL-Gemini-v1.REGION
    displayName: REGION
    description: The GCP region that should be used for the Vertex AI Gemini endpoint.
    default: "{system.region.name}"
    examples:
      - "{system.region.name}"
  - name: MODEL-Gemini-v1.MODEL_ID
    displayName: MODEL_ID
    description: The Gemini model to use for the request.
    default: gemini-2.5-flash
    examples:
      - gemini-2.5-flash
      - gemini-2.5-pro
  - name: Feature-LLM-SanitizeRequest-v1.PROJECT_ID
    displayName: Model Armor GCP Project Id
    description: Configuration input for PROJECT_ID
    default: "{organization.name}"
    examples:
      - "{organization.name}"
  - name: Feature-LLM-SanitizeRequest-v1.REGION
    displayName: Model Armor GCP region
    description: Configuration input for REGION
    default: "{system.region.name}"
    examples:
      - "{system.region.name}"
  - name: Feature-LLM-SanitizeRequest-v1.TEMPLATE_ID
    displayName: Model Armor Template Id
    description: Configuration input for TEMPLATE_ID
    default: projects/{organization.name}/locations/{system.region.name}/templates/default-ma-template
    examples: []
endpoints:
  - name: gemini
    basePath: /v1/gemini
    routes:
      - name: default
        target: gemini
targets:
  - name: gemini
    url: https://{propertyset.gemini.VERTEX_PATH}
    auth: GoogleAccessToken
    scopes:
      - https://www.googleapis.com/auth/cloud-platform
