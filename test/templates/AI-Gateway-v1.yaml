name: AI-Gateway-v1
type: template
description: API template for AI-Gateway-v1
features:
  - ../features/MODEL-Gemini-v1.yaml
  - ../features/LLM-MaskRequest-v1.yaml
  - ../features/AUTH-Key-Header-v1.yaml
parameters:
  - name: Feature-MODEL-Gemini-v1.PROJECT_ID
    description: Configuration input for PROJECT_ID
    default: apigee-prod13
    examples: []
  - name: Feature-MODEL-Gemini-v1.REGION
    description: Configuration input for REGION
    default: europe-west1
    examples: []
  - name: Feature-MODEL-Gemini-v1.MODEL_ID
    description: Configuration input for MODEL_ID
    default: gemini-2.5-flash
    examples: []
  - name: Feature-LLM-MaskRequest-v1.PROJECT_ID
    displayName: DLP Project Id
    description: Configuration input for PROJECT_ID
    default: apigee-prod13
    examples: []
  - name: AUTH-Key-Header-v1.API_KEY_HEADER_NAME
    displayName: API Key Header
    description: The header name to use for the API key
    examples:
      - x-api-key
      - x-apikey
    default: x-api-key
endpoints:
  - name: gemini
    basePath: /v1/gemini
    routes:
      - name: default
        target: gemini
targets:
  - name: gemini
    url: https://{propertyset.gemini.REGION}-aiplatform.googleapis.com/v1/projects/{propertyset.gemini.PROJECT_ID}/locations/{propertyset.gemini.REGION}/publishers/google/models/{propertyset.gemini.MODEL_ID}:generateContent
    auth: GoogleAccessToken
    scopes:
      - https://www.googleapis.com/auth/cloud-platform
