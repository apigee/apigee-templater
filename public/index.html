<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Apigee Agentic Portal</title>
        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            :root {
                --bg-primary: #ffffff;
                --bg-secondary: #f8fafc;
                --bg-sidebar: #ffffff;
                --text-primary: #1f2937;
                --text-secondary: #6b7280;
                --border: #e5e7eb;
                --accent: #3b82f6;
                --hover: #f3f4f6;
                --shadow:
                    0 1px 3px 0 rgb(0 0 0 / 0.1),
                    0 1px 2px -1px rgb(0 0 0 / 0.1);
                --shadow-lg:
                    0 10px 15px -3px rgb(0 0 0 / 0.1),
                    0 4px 6px -4px rgb(0 0 0 / 0.1);
            }

            [data-theme="dark"] {
                /*--bg-primary: #111827;*/
                --bg-primary: #0f172a;
                --bg-secondary: #0f172a;
                --bg-sidebar: #0f172a;
                --text-primary: #f9fafb;
                --text-secondary: #9ca3af;
                --border: #374151;
                --accent: #60a5fa;
                --hover: #374151;
                --shadow:
                    0 1px 3px 0 rgb(0 0 0 / 0.3),
                    0 1px 2px -1px rgb(0 0 0 / 0.3);
                --shadow-lg:
                    0 10px 15px -3px rgb(0 0 0 / 0.3),
                    0 4px 6px -4px rgb(0 0 0 / 0.3);
            }

            body {
                font-family:
                    "Inter",
                    -apple-system,
                    BlinkMacSystemFont,
                    "Segoe UI",
                    sans-serif;
                background: var(--bg-primary);
                color: var(--text-primary);
                transition: all 0.3s ease;
            }

            .app-container {
                display: flex;
                min-height: 100vh;
            }

            .sidebar {
                background: var(--bg-sidebar);
                border-right: 1px solid var(--border);
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                position: relative;
                z-index: 1000;
                box-shadow: var(--shadow);
                width: 280px;
            }

            .sidebar-header {
                padding: 1.5rem;
                border-bottom: 1px solid var(--border);
                display: flex;
                align-items: center;
                justify-content: space-between;
            }

            .logo {
                display: flex;
                align-items: center;
                gap: 0.75rem;
                font-weight: 600;
                font-size: 1.125rem;
                color: var(--text-primary);
            }

            .logo-icon {
                width: 32px;
                height: 32px;
                background: linear-gradient(135deg, var(--accent), #8b5cf6);
                border-radius: 8px;
                display: flex;
                align-items: center;
                justify-content: center;
                color: white;
                font-weight: bold;
            }

            .theme-toggle {
                background: none;
                border: none;
                color: var(--text-secondary);
                cursor: pointer;
                padding: 0.5rem;
                border-radius: 8px;
                transition: all 0.2s ease;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .theme-toggle:hover {
                background: var(--hover);
                color: var(--text-primary);
            }

            .sidebar-nav {
                padding: 1rem;
                flex: 1;
            }

            .nav-section {
                margin-bottom: 2rem;
            }

            .nav-section-title {
                font-size: 0.75rem;
                font-weight: 600;
                text-transform: uppercase;
                letter-spacing: 0.05em;
                color: var(--text-secondary);
                margin-bottom: 0.75rem;
                padding: 0 0.75rem;
            }

            .nav-items {
                list-style: none;
            }

            .nav-item {
                margin-bottom: 0.25rem;
            }

            .nav-link {
                display: flex;
                align-items: center;
                gap: 0.75rem;
                padding: 0.75rem;
                color: var(--text-secondary);
                text-decoration: none;
                border-radius: 8px;
                transition: all 0.2s ease;
                font-weight: 500;
                position: relative;
            }

            .nav-link:hover {
                background: var(--hover);
                color: var(--text-primary);
            }

            .nav-link.active {
                background: var(--accent);
                color: white;
            }

            .nav-link.active::before {
                content: "";
                position: absolute;
                left: -1rem;
                top: 50%;
                transform: translateY(-50%);
                width: 3px;
                height: 20px;
                background: var(--accent);
                border-radius: 0 2px 2px 0;
            }

            .nav-icon {
                width: 20px;
                height: 20px;
                stroke-width: 2;
                flex-shrink: 0;
            }

            .mobile-toggle {
                display: none;
                position: fixed;
                top: 1rem;
                left: 1rem;
                z-index: 1001;
                background: var(--bg-sidebar);
                border: 1px solid var(--border);
                border-radius: 8px;
                padding: 0.75rem;
                cursor: pointer;
                box-shadow: var(--shadow);
                color: var(--text-primary);
            }

            .mobile-overlay {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.5);
                z-index: 999;
            }

            .main-content {
                flex: 1;
                background: var(--bg-secondary);
                min-height: 100vh;
                padding: 2rem;
                transition: all 0.3s ease;
            }

            .content-header {
                margin-bottom: 2rem;
            }

            .content-title {
                font-size: 2rem;
                font-weight: 700;
                margin-bottom: 0.5rem;
            }

            .content-subtitle {
                color: var(--text-secondary);
                font-size: 1.125rem;
            }

            .content-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                gap: 1.5rem;
            }

            .content-card {
                background: var(--bg-sidebar);
                border: 1px solid var(--border);
                border-radius: 12px;
                padding: 1.5rem;
                box-shadow: var(--shadow);
                transition: all 0.2s ease;
            }

            .content-card:hover {
                box-shadow: var(--shadow-lg);
                transform: translateY(-2px);
            }

            .card-title {
                font-weight: 600;
                margin-bottom: 0.5rem;
            }

            .card-text {
                color: var(--text-secondary);
                line-height: 1.6;
            }

            /* Responsive breakpoints */
            @media (max-width: 1024px) {
                .sidebar {
                    width: 80px;
                }

                .sidebar-header {
                    padding: 1rem;
                    justify-content: center;
                }

                .logo-text,
                .nav-section-title {
                    display: none;
                }

                .nav-link {
                    justify-content: center;
                    padding: 0.75rem;
                }

                .nav-link span {
                    display: none;
                }

                .theme-toggle {
                    padding: 0.5rem;
                }
            }

            @media (max-width: 768px) {
                .sidebar {
                    position: fixed;
                    left: -280px;
                    top: 0;
                    bottom: 0;
                    width: 280px;
                    z-index: 1000;
                }

                .sidebar.open {
                    left: 0;
                }

                .mobile-toggle {
                    display: block;
                }

                .mobile-toggle.hide {
                    display: none;
                }

                .mobile-overlay.show {
                    display: block;
                }

                .main-content {
                    margin-left: 0;
                    padding: 5rem 1rem 2rem;
                }

                .logo-text,
                .nav-section-title {
                    display: block;
                }

                .nav-link {
                    justify-content: flex-start;
                    padding: 0.75rem;
                }

                .nav-link span {
                    display: block;
                }
            }
        </style>
    </head>
    <body data-theme="light">
        <div class="app-container">
            <button class="mobile-toggle" onclick="toggleSidebar()">
                <svg
                    width="24"
                    height="24"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                >
                    <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M4 6h16M4 12h16M4 18h16"
                    />
                </svg>
            </button>

            <div class="mobile-overlay" onclick="closeSidebar()"></div>

            <aside class="sidebar">
                <div class="sidebar-header">
                    <div class="logo">
                        <div class="logo-icon">A</div>
                        <span class="logo-text">Agentic Portal</span>
                    </div>
                    <button class="theme-toggle" onclick="toggleTheme()">
                        <svg
                            class="theme-icon-light"
                            width="20"
                            height="20"
                            fill="none"
                            stroke="currentColor"
                            viewBox="0 0 24 24"
                        >
                            <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"
                            />
                        </svg>
                        <svg
                            class="theme-icon-dark"
                            width="20"
                            height="20"
                            fill="none"
                            stroke="currentColor"
                            viewBox="0 0 24 24"
                            style="display: none"
                        >
                            <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"
                            />
                        </svg>
                    </button>
                </div>

                <nav class="sidebar-nav">
                    <div class="nav-section">
                        <h3 class="nav-section-title">Main</h3>
                        <ul class="nav-items">
                            <li class="nav-item">
                                <a href="#" class="nav-link active">
                                    <svg
                                        class="nav-icon"
                                        fill="none"
                                        stroke="currentColor"
                                        viewBox="0 0 24 24"
                                        xmlns="http://www.w3.org/2000/svg"
                                        stroke-width="2"
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                    >
                                        <g
                                            id="SVGRepo_bgCarrier"
                                            stroke-width="0"
                                        ></g>
                                        <g
                                            id="SVGRepo_tracerCarrier"
                                            stroke-linecap="round"
                                            stroke-linejoin="round"
                                        ></g>
                                        <g id="SVGRepo_iconCarrier">
                                            <rect
                                                x="3"
                                                y="11"
                                                width="18"
                                                height="10"
                                                rx="2"
                                            ></rect>
                                            <circle
                                                cx="12"
                                                cy="5"
                                                r="2"
                                            ></circle>
                                            <path d="M12 7v4"></path>
                                            <line
                                                x1="8"
                                                y1="16"
                                                x2="8"
                                                y2="16"
                                            ></line>
                                            <line
                                                x1="16"
                                                y1="16"
                                                x2="16"
                                                y2="16"
                                            ></line>
                                        </g>
                                    </svg>
                                    <!--<svg
                                        class="nav-icon"
                                        fill="none"
                                        stroke="currentColor"
                                        viewBox="0 0 24 24"
                                    >
                                        <path
                                            stroke-linecap="round"
                                            stroke-linejoin="round"
                                            d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"
                                        />
                                        <path
                                            stroke-linecap="round"
                                            stroke-linejoin="round"
                                            d="M8 5a2 2 0 012-2h4a2 2 0 012 2v4H8V5z"
                                        />
                                    </svg>-->
                                    <span>Chat</span>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="#" class="nav-link">
                                    <svg
                                        class="nav-icon"
                                        fill="none"
                                        stroke="currentColor"
                                        viewBox="0 0 24 24"
                                    >
                                        <path
                                            stroke-linecap="round"
                                            stroke-linejoin="round"
                                            d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"
                                        />
                                    </svg>
                                    <span>Profile</span>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="#" class="nav-link">
                                    <svg
                                        class="nav-icon"
                                        fill="none"
                                        stroke="currentColor"
                                        viewBox="0 0 24 24"
                                    >
                                        <path
                                            stroke-linecap="round"
                                            stroke-linejoin="round"
                                            d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"
                                        />
                                    </svg>
                                    <span>Analytics</span>
                                </a>
                            </li>
                        </ul>
                    </div>

                    <div class="nav-section">
                        <h3 class="nav-section-title">Tools</h3>
                        <ul class="nav-items">
                            <li class="nav-item">
                                <a href="#" class="nav-link">
                                    <svg
                                        class="nav-icon"
                                        fill="none"
                                        stroke="currentColor"
                                        viewBox="0 0 24 24"
                                    >
                                        <path
                                            stroke-linecap="round"
                                            stroke-linejoin="round"
                                            d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
                                        />
                                    </svg>
                                    <span>Documents</span>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="#" class="nav-link">
                                    <svg
                                        class="nav-icon"
                                        fill="none"
                                        stroke="currentColor"
                                        viewBox="0 0 24 24"
                                    >
                                        <path
                                            stroke-linecap="round"
                                            stroke-linejoin="round"
                                            d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"
                                        />
                                        <path
                                            stroke-linecap="round"
                                            stroke-linejoin="round"
                                            d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"
                                        />
                                    </svg>
                                    <span>Settings</span>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="#" class="nav-link">
                                    <svg
                                        class="nav-icon"
                                        fill="none"
                                        stroke="currentColor"
                                        viewBox="0 0 24 24"
                                    >
                                        <path
                                            stroke-linecap="round"
                                            stroke-linejoin="round"
                                            d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
                                        />
                                    </svg>
                                    <span>Help</span>
                                </a>
                            </li>
                        </ul>
                    </div>
                </nav>
            </aside>

            <main class="main-content">
                <div class="content-header">
                    <h1 class="content-title">Dashboard</h1>
                    <p class="content-subtitle">
                        Welcome to your modern workspace
                    </p>
                </div>

                <iframe
                    id="content-iframe"
                    style="width: 100%; height: 90%; border: 0px"
                    src="/chat"
                >
                </iframe>

                <!--<div class="content-grid">
                    <div class="content-card">
                        <h3 class="card-title">Responsive Design</h3>
                        <p class="card-text">
                            This sidebar adapts to different screen sizes - it
                            shows icons only on tablets and becomes a slide-out
                            menu on mobile devices.
                        </p>
                    </div>

                    <div class="content-card">
                        <h3 class="card-title">Theme Toggle</h3>
                        <p class="card-text">
                            Switch between light and dark modes using the toggle
                            button in the sidebar header. The theme preference
                            is applied instantly across all elements.
                        </p>
                    </div>

                    <div class="content-card">
                        <h3 class="card-title">Smooth Animations</h3>
                        <p class="card-text">
                            Experience fluid transitions and micro-interactions
                            that enhance the user experience without being
                            distracting.
                        </p>
                    </div>

                    <div class="content-card">
                        <h3 class="card-title">Modern Aesthetics</h3>
                        <p class="card-text">
                            Clean typography, subtle shadows, and carefully
                            chosen colors create a professional and contemporary
                            interface.
                        </p>
                    </div>
                </div>-->
            </main>
        </div>

        <script>
            const savedTheme = localStorage.getItem("theme") || "light";
            setTheme(savedTheme);

            const searchParams = new URLSearchParams(window.location.href);
            for (const p of searchParams) {
                if (p[0] == "code") {
                    let code = p[1];
                    localStorage.setItem("authorization_code", code);
                    window.location.href = window.location.origin;
                }
            }

            function toggleTheme() {
                const currentTheme = document.body.getAttribute("data-theme");
                const newTheme = currentTheme === "light" ? "dark" : "light";

                setTheme(newTheme);

                document
                    .getElementById("content-iframe")
                    .contentWindow.location.reload();
            }

            function setTheme(newTheme) {
                const lightIcon = document.querySelector(".theme-icon-light");
                const darkIcon = document.querySelector(".theme-icon-dark");

                document.body.setAttribute("data-theme", newTheme);
                localStorage.setItem("theme", newTheme);

                if (newTheme === "dark") {
                    lightIcon.style.display = "none";
                    darkIcon.style.display = "block";
                } else {
                    lightIcon.style.display = "block";
                    darkIcon.style.display = "none";
                }
            }

            function toggleSidebar() {
                const sidebar = document.querySelector(".sidebar");
                const overlay = document.querySelector(".mobile-overlay");
                const toggle = document.querySelector(".mobile-toggle");

                sidebar.classList.toggle("open");
                overlay.classList.toggle("show");
                toggle.classList.toggle("hide");
            }

            function closeSidebar() {
                const sidebar = document.querySelector(".sidebar");
                const overlay = document.querySelector(".mobile-overlay");
                const toggle = document.querySelector(".mobile-toggle");

                sidebar.classList.remove("open");
                overlay.classList.remove("show");
                setTimeout(() => {
                    toggle.classList.toggle("hide");
                }, 200);
            }

            // Handle navigation clicks
            document.querySelectorAll(".nav-link").forEach((link) => {
                link.addEventListener("click", function (e) {
                    e.preventDefault();

                    // Remove active class from all links
                    document
                        .querySelectorAll(".nav-link")
                        .forEach((l) => l.classList.remove("active"));

                    // Add active class to clicked link
                    this.classList.add("active");

                    // Update main content title
                    const title = this.querySelector("span").textContent;
                    document.querySelector(".content-title").textContent =
                        title;

                    // Close sidebar on mobile after selection
                    if (window.innerWidth <= 768) {
                        closeSidebar();
                    }
                });
            });

            // Handle window resize
            window.addEventListener("resize", function () {
                if (window.innerWidth > 768) {
                    closeSidebar();
                } else {
                    const toggle = document.querySelector(".mobile-toggle");
                    toggle.classList.remove("hide");
                }
            });

            window.document.addEventListener("myEvent", (event) => {
                console.log(event);
                window.location.href =
                    event.detail.url + "&redirect_uri=" + window.location.href;
            });
        </script>
    </body>
</html>
